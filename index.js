let mobileObj = {
  Apple: {
    models: {
      "iphone 11": {
        src: "./images/iphone11.jpg",
        screenSize: "6.1 inches",
        frontCamera: "12 mega pixels",
        backCamera: "dual 12 mega pixels",
        colors: "Black, Green, Yellow, Purple, Red, White",
        fingerPrint: "NO",
        ram: "4gb",
        storage: ["64gb", "128gb", "256gb"],
        battery: "3110 mah",
        ios: "13 upgradable to 17",
        price: "85499 PKR",
      },
      "iphone 12 pro": {
        src: "./images/iphone12pro.jpg",
        screenSize: "6.7 inches",
        frontCamera: "12 mega pixels",
        backCamera: "triple 12 mega pixels",
        colors: "Black, Green, Yellow, Purple, Red, White",
        fingerPrint: "NO",
        ram: "6gb",
        storage: ["64gb", "128gb", "256gb", "512gb"],
        battery: "3687 mah",
        ios: "14.1 upgradable to 17.5.1",
        price: "120999 PKR",
      },
      "iphone 15 pro": {
        src: "./images/iphone15pro.jpg",
        screenSize: "6.7 inches",
        frontCamera: "32 mega pixels",
        backCamera: "triple 48 , 12 and 12 mega pixels",
        colors: "Black, Green, Yellow, Purple, Red, White",
        fingerPrint: "NO",
        ram: "8gb",
        storage: ["128gb", "256gb", "512gb"],
        battery: "4441 mah",
        ios: "14.1 upgradable to 17.6.1",
        price: "210999 PKR",
      },
    },
  },
  Samsung: {
    models: {
      "Galaxy A55": {
        src: "./images/galaxya55.jpg",
        screenSize: "6.6 inches",
        frontCamera: "32 mega pixels",
        backCamera: "tripel 50 , 12 and 5 mega pixels",
        colors: "Black, Green, Yellow, Purple, Red, White",
        fingerPrint: "Yes",
        ram: "4gb",
        storage: ["64gb", "128gb", "256gb"],
        battery: "5000 mah",
        Android: "Android 14",
        price: "77299 PKR",
      },
      "Galaxy S24 Ultra": {
        src: "./images/galaxys24ultra.jpg",
        screenSize: "6.8 inches",
        frontCamera: "32 mega pixels",
        backCamera: "Quad 200 , 10 , 50 and 12 mega pixels",
        colors:
          "Titanium Black, Titanium Gray, Titanium Violet , Titanium Green, Titanium Orange",
        fingerPrint: "Yes",
        ram: "12gb",
        storage: ["256gb", "1TB"],
        battery: "5000 mah",
        Android: "Android 14",
        price: "282999 PKR",
      },
      "Galaxy F55": {
        src: "./images/galaxyf55.jpg",
        screenSize: "6.7 inches",
        frontCamera: "28 mega pixels",
        backCamera: "tripel 32 , 12 and 5 mega pixels",
        colors: "Black, Green, Purple, Red, White",
        fingerPrint: "Yes",
        ram: "6gb",
        storage: ["64gb", "128gb", "256gb"],
        battery: "4800 mah",
        Android: "Android 11",
        price: "55299 PKR",
      },
    },
  },
  Techno: {
    models: {
      "Spark 5": {
        src: "./images/spark5.jpg",
        screenSize: "6.2 inches",
        frontCamera: "28 mega pixels",
        backCamera: "dual 12 and 5 mega pixels",
        colors: "Black, Green, gray , White",
        fingerPrint: "Yes",
        ram: "3gb , 4gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "4800 mah",
        Android: "Android 12",
        price: "33299 PKR",
      },
      "Pova 2": {
        src: "./images/pova2.jpg",
        screenSize: "6.6 inches",
        frontCamera: "32 mega pixels",
        backCamera: "dual 20 and 12 mega pixels",
        colors: "black , blue , purple , white , gray",
        fingerPrint: "Yes",
        ram: "4gb , 6gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "5000 mah",
        Android: "Android 14",
        price: "45999 PKR",
      },
      "Spark 10": {
        src: "./images/spark10.jpg",
        screenSize: "6.0 inches",
        frontCamera: "15 mega pixels",
        backCamera: "20 mega pixels",
        colors: "Black, Green, Purple, Red, White",
        fingerPrint: "Yes",
        ram: "4gb ,  6gb , 12gb ",
        storage: ["4gb", "64gb", "128gb"],
        battery: "4800 mah",
        Android: "Android 10",
        price: "31299 PKR",
      },
    },
  },
  Vivo: {
    models: {
      "Vivo Y11": {
        src: "./images/y11.jpg",
        screenSize: "6.2 inches",
        frontCamera: "28 mega pixels",
        backCamera: "dual 10 and 5 mega pixels",
        colors: "Black, Blue, Gray , White",
        fingerPrint: "Yes",
        ram: "3gb , 4gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "5000 mah",
        Android: "Android 9",
        price: "20299 PKR",
      },
      "Vivo S1": {
        src: "./images/s1.jpg",
        screenSize: "6.6 inches",
        frontCamera: "28 mega pixels",
        backCamera: "dual 20 and 12 mega pixels",
        colors: "black , blue , purple , white , gray",
        fingerPrint: "Yes",
        ram: "4gb , 6gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "5000 mah",
        Android: "Android 14",
        price: "45999 PKR",
      },
      "Vivo Y19": {
        src: "./images/y19.jpg",
        screenSize: "6.75 inches",
        frontCamera: "22 mega pixels",
        backCamera: "tripel 20 , 12 and 5 mega pixels",
        colors: "Black, Green, Purple, Red, White",
        fingerPrint: "Yes",
        ram: "4gb , 6gb ",
        storage: ["4gb", "64gb", "128gb"],
        battery: "6000 mah",
        Android: "Android 11",
        price: "55299 PKR",
      },
    },
  },
  Oppo: {
    models: {
      A18: {
        src: "./images/a18.jpg",
        screenSize: "6.2 inches",
        frontCamera: "28 mega pixels",
        backCamera: "dual 12 and 5 mega pixels",
        colors: "Black, Green, gray , White",
        fingerPrint: "Yes",
        ram: "3gb , 4gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "4800 mah",
        Android: "Android 12",
        price: "33299 PKR",
      },
      "Reno 12": {
        src: "./images/reno12.jpg",
        screenSize: "6.6 inches",
        frontCamera: "22 mega pixels",
        backCamera: "dual 23 and 12 mega pixels",
        colors: "black , purple , white , gray",
        fingerPrint: "Yes",
        ram: "4gb , 6gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "5000 mah",
        Android: "Android 13",
        price: "45999 PKR",
      },
      "F9 Pro": {
        src: "./images/f9pro.jpg",
        screenSize: "6.75 inches",
        frontCamera: "25 mega pixels",
        backCamera: "tripel 30 , 12 and 5 mega pixels",
        colors: "Black, Green, Purple, White",
        fingerPrint: "Yes",
        ram: "6gb , 12gb ",
        storage: ["64gb", "128gb", "256gb"],
        battery: "4000 mah",
        Android: "Android 11",
        price: "55299 PKR",
      },
    },
  },
  Realme: {
    models: {
      "Note 5 Pro": {
        src: "./images/note5pro.jpg",
        screenSize: "6.2 inches",
        frontCamera: "21 mega pixels",
        backCamera: "dual 20 and 5 mega pixels",
        colors: "Black, Green, gray , White",
        fingerPrint: "Yes",
        ram: "3gb , 4gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "4800 mah",
        Android: "Android 12",
        price: "33299 PKR",
      },
      "Note 10": {
        src: "./images/note10.jpg",
        screenSize: "6.6 inches",
        frontCamera: "40 mega pixels",
        backCamera: "dual 25 and 12 mega pixels",
        colors: "black , blue , purple , white , gray",
        fingerPrint: "Yes",
        ram: "4gb , 6gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "5000 mah",
        Android: "Android 14",
        price: "45999 PKR",
      },
      "13 C": {
        src: "./images/13c.jpg",
        screenSize: "5.80 inches",
        frontCamera: "25 mega pixels",
        backCamera: "32 mega pixels",
        colors: "Black, Green, Purple, Red, White",
        fingerPrint: "Yes",
        ram: "4gb , 6gb ",
        storage: ["32", "64gb"],
        battery: "3000 mah",
        Android: "Android 9",
        price: "35299 PKR",
      },
    },
  },
  Motorola: {
    models: {
      "Moto Z Slim": {
        src: "./images/motozslim.jpg",
        screenSize: "6.0 inches",
        frontCamera: "21 mega pixels",
        backCamera: "24 mega pixels",
        colors: "Black, gray , White",
        fingerPrint: "Yes",
        ram: "3gb , 4gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "2800 mah",
        Android: "Android 9",
        price: "20299 PKR",
      },
      "Moto G Power": {
        src: "./images/motogpower.jpg",
        screenSize: "6.6 inches",
        frontCamera: "30 mega pixels",
        backCamera: "25 mega pixels",
        colors: "black , blue , purple , white , gray",
        fingerPrint: "Yes",
        ram: "4gb , 6gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "5000 mah",
        Android: "Android 12",
        price: "45599 PKR",
      },
      "Moto Z force": {
        src: "./images/motozforce.jpg",
        screenSize: "6.25 inches",
        frontCamera: "20 mega pixels",
        backCamera: "32 mega pixels",
        colors: "Black , gray, White",
        fingerPrint: "Yes",
        ram: "4gb , 6gb ",
        storage: ["32gb", "64gb", "128gb"],
        battery: "3700 mah",
        Android: "Android 10",
        price: "31299 PKR",
      },
    },
  },
  Sony: {
    models: {
      "Xperia 1": {
        src: "./images/xperia1.jpg",
        screenSize: "5.5 inches",
        frontCamera: "14 mega pixels",
        backCamera: "dual 10 and 5 mega pixels",
        colors: "Black, Green, gray , White",
        fingerPrint: "No",
        ram: "3gb , 4gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "3600 mah",
        Android: "Android 8",
        price: "28299 PKR",
      },
      "Xperia 5": {
        src: "./images/xperia5.jpg",
        screenSize: "6.0 inches",
        frontCamera: "20 mega pixels",
        backCamera: "dual 25 and 12 mega pixels",
        colors: "black , blue , purple , white , gray",
        fingerPrint: "Yes",
        ram: "4gb , 6gb",
        storage: ["32gb", "64gb", "128gb"],
        battery: "4000 mah",
        Android: "Android 11",
        price: "55999 PKR",
      },
      "Xperia 10": {
        src: "./images/xperia10.jpg",
        screenSize: "6.72 inches",
        frontCamera: "25 mega pixels",
        backCamera: "tripel 24 , 12 and 5 mega pixels",
        colors: "Black, Green, Purple, Red, White",
        fingerPrint: "Yes",
        ram: "6gb , 12gb ",
        storage: ["64gb", "128gb", "256gb"],
        battery: "6000 mah",
        Android: "Android 11",
        price: "65299 PKR",
      },
    },
  },
};

let navbar = document.querySelector(".navbar");

window.addEventListener("scroll", function() {
  let scrollY = window.scrollY; // Get the number of pixels scrolled vertically

  if (scrollY >= 50) {
    if (!navbar.classList.contains("fixed")) {
      // Add fixed position and animations for scrolling down
      navbar.classList.add("fixed");
      navbar.classList.add("animate__animated", "animate__fadeInDown");
      navbar.classList.remove("relative");
    }
  } else {
    navbar.classList.remove("fixed");
    navbar.classList.add("relative");
    navbar.classList.remove("animate__fadeInDown");
  }
});

let mobileBrand = document.getElementById("mobile");
let allModels = document.getElementById("allmodels");
let resultDiv = document.getElementById("result");
let button = document.getElementById("search");
let cartParentDiv = document.querySelector(".cart-parent");
let cartDiv = document.querySelector(".cart-box");

function cartBtnDisability (){
  let cartCount = document.querySelector(".cart-count");
  let cartText = document.querySelector(".add-to-cart");

  if (cartText.innerHTML !== "0"){
    cartCount.removeAttribute("disabled")
  }else{
    cartCount.setAttribute("disabled" , true)
  }
}

function displayMobilesOnLoad() {
  const someBrands = ["Apple", "Samsung", "Vivo", "Sony"].reverse();
  for (let brand of someBrands) {
    let someModels = mobileObj[brand].models;
    for (let model in someModels) {
      const specs = someModels[model];
      let someMobSpecs = `
      <div class="result-div">
        <div class="see-more" onclick="showingModal('${brand}', '${model}')">See more Specs</div>
        <h2><strong>${brand}</strong></h2>
        <img src="${specs["src"]}">
        <h2>Model: <strong>${model}</strong></h2>`;
      if (specs.hasOwnProperty("Android")) {
        someMobSpecs += `<h2>Android: <strong>${specs["Android"]}</strong></h2>`;
      } else {
        someMobSpecs += `<h2>IOS: <strong>${specs["ios"]}</strong></h2>`;
      }
      someMobSpecs += `
        <h2>Ram: <strong>${specs["ram"].split(",").join("")}</strong></h2>
        <h2>Storage: <strong>${specs["storage"].join(" ")}</strong></h2>
        <h2>Price: <strong>${specs["price"]}</strong></h2>
      </div>
      `;
      resultDiv.innerHTML += someMobSpecs;
      for (let allBrand in mobileObj) {
        for (let allModelsSpec in mobileObj[allBrand].models) {
          const allSpecs = mobileObj[allBrand].models[allModelsSpec];

          createModal(allBrand, allModelsSpec, allSpecs);
        }
      }
    }
  }
}
displayMobilesOnLoad();

function createModal(brand, model, specs) {
  let modalDiv = document.createElement("div");
  modalDiv.className = "modal-div";
  modalDiv.id = `modal-${brand}-${model}`;
  modalDiv.style.display = "none";
  let modalShow = document.getElementById("modal-show");
  let showModal = `
          <div>
            <h2 style="text-align:center;position:relative">${brand}<button onclick="hideModal('${brand}-${model}')"><i class="fa-solid fa-xmark"></i></button></h2>
            <div class="modal result-div">
              <div>
                <img src="${specs["src"]}">
              </div>
              <div class="modal-specs">
              <ul>
                <li>Model: <strong>${model}</strong></li>
                <li>Screen Size: <strong>${specs["screenSize"]}</strong></li>
                <li>Front Camera: <strong>${specs["frontCamera"]}</strong></li>
                <li>Back Camera: <strong>${specs["backCamera"]}</strong></li>
                <li>Colors: <strong>${specs["colors"]
                  .split(",")
                  .join("")}</strong></li>`;
  if (specs.hasOwnProperty("Android")) {
    showModal += `<li>Android: <strong>${specs["Android"]}</strong></li>`;
  } else {
    showModal += `<li>IOS: <strong>${specs["ios"]}</strong></li>`;
  }
  showModal += `
                <li>FingerPrint Sensor: <strong>${
                  specs["fingerPrint"]
                }</strong></li>
                <li>Ram: <strong>${specs["ram"]
                  .split(",")
                  .join("")}</strong></li>
                <li>Storage: <strong>${specs["storage"].join(" ")}</strong></li>
                <li>Battery: <strong>${specs["battery"]}</strong></li>
                <li>Price: <strong>${specs["price"]}</strong></li>
                <div class="cart-div">
                <button class="cart-btn" onclick="cartPlus('${brand}','${model}'),cartBtnDisability()">Add to Cart</button>
                </div>
                </ul>
                </div>
                </div>
          </div>`;
  modalDiv.innerHTML = showModal;
  modalShow.appendChild(modalDiv);
}

function showingModal(brand, model) {
  document
    .querySelectorAll(".modal-div")
    .forEach((modal) => (modal.style.display = "none"));
  document
    .querySelectorAll("#result")
    .forEach((div) => (div.style.display = "none"));
  document.getElementById(`modal-${brand}-${model}`).style.display = "block";
}

function hideModal(id) {
  document.getElementById(`modal-${id}`).style.display = "none";
  document
    .querySelectorAll("#result")
    .forEach((div) => (div.style.display = "flex"));
}

for (let mobile in mobileObj) {
  let option = document.createElement("option");
  option.text = mobile;
  option.value = mobile;
  mobileBrand.appendChild(option);
}

let brand, models, selectedModel;

mobileBrand.addEventListener("change", function(e) {
  brand = e.target.value;
  if (brand) {
    models = mobileObj[brand].models;
    allModels.innerHTML = `<option value="">Select Model</option>`;
    for (let model in models) {
      let option = document.createElement("option");
      option.text = model;
      option.value = model;
      allModels.appendChild(option);
    }
  }
});

allModels.addEventListener("change", function(e) {
  selectedModel = e.target.value;
});

function showResult() {
  resultDiv.innerHTML = "";
  allModels.disabled = true;
  if (brand && selectedModel) {
    let mobileSpec = mobileObj[brand].models[selectedModel];
    let result = `
    <div class="result-div">
      <div class="see-more" onclick="showingModal('${brand}', '${selectedModel}')">See more Specs</div>
      <img src="${mobileSpec["src"]}">
      <h2>Model: <strong>${selectedModel}</strong></h2>`;
    if (mobileSpec.hasOwnProperty("Android")) {
      result += `<h2>Android: <strong>${mobileSpec["Android"]}</strong></h2>`;
    } else {
      result += `<h2>IOS: <strong>${mobileSpec["ios"]}</strong></h2>`;
    }
    result += `
      <h2>Ram: <strong>${mobileSpec["ram"].split(",").join("")}</strong></h2>
      <h2>Storage: <strong>${mobileSpec["storage"].join(" ")}</strong></h2>
      <h2>Price: <strong>${mobileSpec["price"]}</strong></h2>
    </div>
    `;
    resultDiv.innerHTML = result;
    button.disabled = false;
    allModels.disabled = false;
  } else {
    resultDiv.innerHTML = "";
    for (let brand in mobileObj) {
      for (let model in mobileObj[brand]["models"]) {
        let specifi = mobileObj[brand].models[model];
        let allMobileSpecs = `
        <div class="result-div">
          <div class="see-more" onclick="showingModal('${brand}', '${model}')">See more Specs</div>
          <h2><strong>${brand}</strong></h2>
          <img src="${specifi["src"]}">
          <h2>Model: <strong>${model}</strong></h2>`;
        if (specifi.hasOwnProperty("Android")) {
          allMobileSpecs += `<h2>Android: <strong>${specifi["Android"]}</strong></h2>`;
        } else {
          allMobileSpecs += `<h2>IOS: <strong>${specifi["ios"]}</strong></h2>`;
        }
        allMobileSpecs += `
          <h2>Ram: <strong>${specifi["ram"].split(",").join("")}</strong></h2>
          <h2>Storage: <strong>${specifi["storage"].join(" ")}</strong></h2>
          <h2>Price: <strong>${specifi["price"]}</strong></h2>
        </div>
        `;
        resultDiv.innerHTML += allMobileSpecs;
        button.disabled = true;
        mobileBrand.disabled = true;
        allModels.disabled = true;
        button.innerText = "Disabled";
      }
      if (allModels.disabled === true) {
        mobileBrand.innerHTML = `<option value="">Select Brand</option>`;
        allModels.innerHTML = `<option value="">Select Model</option>`;
      }
    }
  }
}

function cartPlus(brand, model) {
  let cartParent = document.getElementById(`modal-${brand}-${model}`);
  console.log(cartParent);
  let cartSelect = cartParent
    .querySelector(".modal-specs")
    .querySelector(".cart-btn");
  console.log(cartSelect);
  let cart = document.querySelector(".add-to-cart");
  let convertToNum = parseInt(cart.innerHTML);
  convertToNum++;
  cart.innerHTML = convertToNum;
  cartSelect.disabled = true;
  cartSelect.innerHTML = "Added to Cart";

  let getSpecs = mobileObj[brand].models[model];
  let addDetailsToCart = `
  <div class="cart-data">
  <ul>
  <li><img src ="${getSpecs.src}"></li>
  <li>Brand : ${brand}</li>
  <li>Model Name : ${model}</li>
  <li>Price : ${getSpecs.price}</li>
  </ul>
  </div>
  `;
  cartDiv.innerHTML += addDetailsToCart;
}

function showCart() {
  let modalDiv = (document.getElementById("modal-show").style.display = "none");
  let cardDiv = (document.getElementById("result").style.display = "none");
  cartParentDiv.style.display = "block";
  cartDiv.style.display = "flex";
}

function hideCart() {
  let modalDiv = (document.getElementById("modal-show").style.display = "flex");
  let cardDiv = (document.getElementById("result").style.display = "flex");
  cartParentDiv.style.display = "none";
}
